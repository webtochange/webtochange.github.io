const net = new brain.NeuralNetwork();

const data = [{"input":{"r":0,"g":0,"b":0},"output":[1]},{"input":{"r":1,"g":1,"b":1},"output":[0]},{"input":{"r":0.31094866815207767,"g":0.06652014903049985,"b":0.41635265389614906},"output":[1]},{"input":{"r":0.1679519794119808,"g":0.6979190049496613,"b":0.43561243629699686},"output":[1]},{"input":{"r":0.1585453700838102,"g":0.27072525134330405,"b":0.755554875686473},"output":[1]},{"input":{"r":0.9776803843766082,"g":0.7700828304540575,"b":0.9920181942172732},"output":[0]},{"input":{"r":0.906851269755361,"g":0.6903036410880625,"b":0.23718528643230918},"output":[1]},{"input":{"r":0.20059379904304064,"g":0.7599024537098686,"b":0.7132726047631954},"output":[1]},{"input":{"r":0.9600555309297518,"g":0.7689432536834393,"b":0.8072017430014944},"output":[0]},{"input":{"r":0.14417865061355162,"g":0.2117100788727071,"b":0.681982008878691},"output":[1]},{"input":{"r":0.3942214233375356,"g":0.6537211449609648,"b":0.5001089888222645},"output":[1]},{"input":{"r":0.3797357410279527,"g":0.5309905292814836,"b":0.6247532932157325},"output":[1]},{"input":{"r":0.564276281957625,"g":0.5342673693631141,"b":0.30303947121527686},"output":[1]},{"input":{"r":0.8341327984227946,"g":0.9124860100030667,"b":0.0937097277134642},"output":[0]},{"input":{"r":0.9918245093681115,"g":0.060736524685940596,"b":0.4930701909433699},"output":[1]},{"input":{"r":0.5888860111385259,"g":0.9700449782763532,"b":0.07804208874451302},"output":[0]},{"input":{"r":0.04356203998187014,"g":0.10996890299896722,"b":0.7752344391588359},"output":[1]},{"input":{"r":0.516979380531666,"g":0.637160763700819,"b":0.27821461879139653},"output":[1]},{"input":{"r":0.5126587367266127,"g":0.08588856547614898,"b":0.7417049608802302},"output":[1]},{"input":{"r":0.11675020586636786,"g":0.11036404793360255,"b":0.9370109953387462},"output":[1]},{"input":{"r":0.811179308319262,"g":0.31103568516591507,"b":0.4327378192954072},"output":[1]},{"input":{"r":0.7853497156962879,"g":0.3002923629627221,"b":0.08273536757997024},"output":[1]},{"input":{"r":0.6662813366285001,"g":0.8848700957492748,"b":0.7384459921693072},"output":[0]},{"input":{"r":0.10105696615006954,"g":0.7821561605363017,"b":0.9610382504239314},"output":[1]},{"input":{"r":0.41223065169848705,"g":0.5016982704081201,"b":0.6152160710590142},"output":[1]},{"input":{"r":0.08616471808530268,"g":0.3708199065265554,"b":0.40510847388575755},"output":[1]},{"input":{"r":0.0934111097356769,"g":0.5291237789941032,"b":0.884205394785434},"output":[1]},{"input":{"r":0.8217595477781912,"g":0.9017690228644146,"b":0.2954468127117895},"output":[0]},{"input":{"r":0.6961780932049333,"g":0.6643922718053297,"b":0.5770198756849374},"output":[0]},{"input":{"r":0.5371735916235574,"g":0.720701293227265,"b":0.6773167385825742},"output":[0]},{"input":{"r":0.8878107026044204,"g":0.6569852708255879,"b":0.7761849825102065},"output":[0]},{"input":{"r":0.5034115232329304,"g":0.6288714290531636,"b":0.4248278499065967},"output":[0]},{"input":{"r":0.2662549652543209,"g":0.650412029779083,"b":0.3663795885573935},"output":[0]},{"input":{"r":0.7147549752557529,"g":0.6208217692901223,"b":0.6166386258702317},"output":[0]},{"input":{"r":0.39766781357983616,"g":0.8174112035488426,"b":0.17667038445925587},"output":[0]},{"input":{"r":0.9662340931262836,"g":0.42397948676237185,"b":0.337749696170214},"output":[0]},{"input":{"r":0.458147801324408,"g":0.43795923289489824,"b":0.5608125379192159},"output":[0]},{"input":{"r":0.4276627986478263,"g":0.03579663288042334,"b":0.6422369183185974},"output":[1]},{"input":{"r":0.8093343239462036,"g":0.3201118980864852,"b":0.09827381741050645},"output":[1]},{"input":{"r":0.32595325804717223,"g":0.2806057167365219,"b":0.9809647468966829},"output":[0]},{"input":{"r":0.3857942662260725,"g":0.4946699027223922,"b":0.5937300378563555},"output":[0]},{"input":{"r":0.8062950555271307,"g":0.6367958758833816,"b":0.6999504409096928},"output":[0]},{"input":{"r":0.46578674348571325,"g":0.3799489314370146,"b":0.3475038179013852},"output":[1]}];

net.train(data);

const colorEl = document.querySelector("#color");
const guessEl = document.querySelector("#guess");
const whiteButton = document.querySelector("#white-button");
const blackButton = document.querySelector("#black-button");
const printButton = document.querySelector("#print-button");

let color
setRandomColor()

whiteButton.addEventListener('click', () => 
{
    chooseColor(1);
})
blackButton.addEventListener('click', () => 
{
    chooseColor(0);
})
printButton.addEventListener('click', () => 
{
    print();
})


function chooseColor(value)
{
    data.push({input: color, output: [value]});
    setRandomColor();
}


function setRandomColor()
{
    color = {r: Math.random(), g: Math.random(), b: Math.random()}

    const guess = net.run(color)[0]
    guessEl.style.color = guess > .5 ? '#fff' : '#000';
    colorEl.style.backgroundColor = `rgba(${color.r * 255}, ${color.g * 255}, ${color.b * 255})`;
}

function print()
{
    console.log(JSON.stringify(data))
}